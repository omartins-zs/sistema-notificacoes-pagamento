{
	"info": {
		"_postman_id": "sistema-notificacoes-pagamento",
		"name": "Sistema de Notificações de Pagamento",
		"description": "API para gerenciamento de notificações de pagamento",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Cobranças",
			"item": [
				{
					"name": "Listar Cobranças",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/cobrancas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"cobrancas"
							]
						},
						"description": "Lista todas as cobranças do vendedor autenticado.\n\n**Resposta de Sucesso (200):**\n```json\n{\n    \"status\": \"success\",\n    \"status_code\": 200,\n    \"message\": \"Cobranças listadas com sucesso.\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"descricao\": \"Pagamento de serviços\",\n            \"valor\": \"1500.00\",\n            \"data_vencimento\": \"2024-12-25\",\n            \"status\": \"pendente\",\n            \"cliente\": {\n                \"id\": 1,\n                \"nome\": \"João Silva\",\n                \"email\": \"joao@example.com\",\n                \"telefone\": \"(11) 99999-9999\"\n            },\n            \"created_at\": \"2024-12-24T12:00:00.000000Z\",\n            \"updated_at\": \"2024-12-24T12:00:00.000000Z\"\n        }\n    ]\n}\n```\n\n**Resposta de Erro (500):**\n```json\n{\n    \"status\": \"error\",\n    \"status_code\": 500,\n    \"message\": \"Erro ao listar cobranças. Tente novamente mais tarde.\"\n}\n```"
					},
					"response": [
						{
							"name": "Sucesso - Lista de Cobranças (Múltiplas)",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/cobrancas",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"cobrancas"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"success\",\n    \"status_code\": 200,\n    \"message\": \"Cobranças listadas com sucesso.\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"descricao\": \"Pagamento de serviços\",\n            \"valor\": \"1500.00\",\n            \"data_vencimento\": \"2024-12-25\",\n            \"status\": \"pendente\",\n            \"cliente\": {\n                \"id\": 1,\n                \"nome\": \"João Silva\",\n                \"email\": \"joao@example.com\",\n                \"telefone\": \"(11) 99999-9999\"\n            },\n            \"created_at\": \"2024-12-24T12:00:00.000000Z\",\n            \"updated_at\": \"2024-12-24T12:00:00.000000Z\"\n        },\n        {\n            \"id\": 2,\n            \"descricao\": \"Pagamento de produtos\",\n            \"valor\": \"2500.00\",\n            \"data_vencimento\": \"2024-12-30\",\n            \"status\": \"pendente\",\n            \"cliente\": {\n                \"id\": 2,\n                \"nome\": \"Maria Santos\",\n                \"email\": \"maria@example.com\",\n                \"telefone\": \"(11) 88888-8888\"\n            },\n            \"created_at\": \"2024-12-24T12:00:00.000000Z\",\n            \"updated_at\": \"2024-12-24T12:00:00.000000Z\"\n        },\n        {\n            \"id\": 3,\n            \"descricao\": \"Pagamento de consultoria\",\n            \"valor\": \"3500.00\",\n            \"data_vencimento\": \"2025-01-05\",\n            \"status\": \"paga\",\n            \"cliente\": {\n                \"id\": 3,\n                \"nome\": \"Pedro Oliveira\",\n                \"email\": \"pedro@example.com\",\n                \"telefone\": \"(11) 77777-7777\"\n            },\n            \"created_at\": \"2024-12-24T12:00:00.000000Z\",\n            \"updated_at\": \"2024-12-24T12:00:00.000000Z\"\n        }\n    ]\n}"
						},
						{
							"name": "Sucesso - Lista Vazia",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/cobrancas",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"cobrancas"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"success\",\n    \"status_code\": 200,\n    \"message\": \"Cobranças listadas com sucesso.\",\n    \"data\": []\n}"
						},
						{
							"name": "Erro - Servidor",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/cobrancas",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"cobrancas"
									]
								}
							},
							"status": "Internal Server Error",
							"code": 500,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"error\",\n    \"status_code\": 500,\n    \"message\": \"Erro ao listar cobranças. Tente novamente mais tarde.\"\n}"
						}
					]
				},
				{
					"name": "Criar Cobrança",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"cliente_id\": 1,\n    \"descricao\": \"Pagamento de serviços\",\n    \"valor\": 1500.00,\n    \"data_vencimento\": \"2024-12-31\",\n    \"status\": \"pendente\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/cobrancas",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"cobrancas"
							]
						},
						"description": "Cria uma nova cobrança.\n\n**Parâmetros:**\n- `cliente_id` (obrigatório): ID do cliente - **O cliente DEVE ter um email cadastrado** para poder receber notificações por email\n- `descricao` (obrigatório): Descrição da cobrança (máximo 200 caracteres)\n- `valor` (obrigatório): Valor da cobrança (deve ser maior que zero)\n- `data_vencimento` (obrigatório): Data de vencimento (deve ser hoje ou futura)\n- `status` (opcional): Status da cobrança - \"pendente\" (padrão), \"paga\" ou \"atrasada\"\n\n**Observação importante:**\nO cliente selecionado deve ter um email válido cadastrado no sistema para que seja possível enviar notificações por email posteriormente.\n\n**Resposta de Sucesso (201):**\n```json\n{\n    \"status\": \"success\",\n    \"status_code\": 201,\n    \"message\": \"Cobrança criada com sucesso.\",\n    \"data\": {\n        \"id\": 1,\n        \"descricao\": \"Pagamento de serviços\",\n        \"valor\": \"1500.00\",\n        \"data_vencimento\": \"2024-12-31\",\n        \"status\": \"pendente\",\n        \"cliente\": {\n            \"id\": 1,\n            \"nome\": \"João Silva\",\n            \"email\": \"joao@example.com\",\n            \"telefone\": \"(11) 99999-9999\"\n        },\n        \"created_at\": \"2024-12-24T12:00:00.000000Z\",\n        \"updated_at\": \"2024-12-24T12:00:00.000000Z\"\n    }\n}\n```"
					},
					"response": [
						{
							"name": "Sucesso - Cobrança Criada",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cliente_id\": 1,\n    \"descricao\": \"Pagamento de serviços\",\n    \"valor\": 1500.00,\n    \"data_vencimento\": \"2024-12-31\",\n    \"status\": \"pendente\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/cobrancas",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"cobrancas"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"success\",\n    \"status_code\": 201,\n    \"message\": \"Cobrança criada com sucesso.\",\n    \"data\": {\n        \"id\": 1,\n        \"descricao\": \"Pagamento de serviços\",\n        \"valor\": \"1500.00\",\n        \"data_vencimento\": \"2024-12-31\",\n        \"status\": \"pendente\",\n        \"cliente\": {\n            \"id\": 1,\n            \"nome\": \"João Silva\",\n            \"email\": \"joao@example.com\",\n            \"telefone\": \"(11) 99999-9999\"\n        },\n        \"created_at\": \"2024-12-24T12:00:00.000000Z\",\n        \"updated_at\": \"2024-12-24T12:00:00.000000Z\"\n    }\n}"
						},
						{
							"name": "Erro - Validação (422)",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cliente_id\": 999,\n    \"descricao\": \"Teste\",\n    \"valor\": -100,\n    \"data_vencimento\": \"2020-01-01\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/cobrancas",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"cobrancas"
									]
								}
							},
							"status": "Unprocessable Entity",
							"code": 422,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"error\",\n    \"status_code\": 422,\n    \"message\": \"Erro de validação ao criar cobrança.\",\n    \"errors\": {\n        \"cliente_id\": [\"O cliente selecionado não existe.\"],\n        \"valor\": [\"O campo valor deve ser maior que zero.\"],\n        \"data_vencimento\": [\"O campo data de vencimento deve ser hoje ou uma data futura.\"]\n    }\n}"
						}
					]
				}
			],
			"description": "Endpoints relacionados a cobranças"
		},
		{
			"name": "Notificações",
			"item": [
				{
					"name": "Enviar Notificação por Email",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"cobranca_id\": 1,\n    \"canal\": \"email\",\n    \"email\": \"destino@example.com\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/notificacoes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"notificacoes"
							]
						},
						"description": "Envia uma notificação de pagamento por EMAIL para uma cobrança específica.\n\n**Parâmetros:**\n- `cobranca_id` (obrigatório): ID da cobrança a ser notificada\n- `canal` (obrigatório): Deve ser \"email\"\n- `email` (opcional): Email de destino. Se não fornecido, será usado o email do cliente associado à cobrança\n\n**Validações:**\n- A cobrança deve existir\n- O canal deve ser \"email\"\n- Quando o canal for \"email\": o parâmetro `email` é obrigatório OU o cliente associado à cobrança deve ter um email cadastrado\n- O email fornecido deve ser um email válido\n\n**Resposta de Sucesso (201):**\n```json\n{\n    \"status\": \"success\",\n    \"status_code\": 201,\n    \"message\": \"Notificação criada com sucesso! O envio será processado em breve.\",\n    \"data\": {\n        \"id\": 1,\n        \"cobranca_id\": 1,\n        \"canal\": \"email\",\n        \"status\": \"pendente\",\n        \"created_at\": \"2024-12-24T12:00:00.000000Z\"\n    }\n}\n```"
					},
					"response": [
						{
							"name": "Sucesso - Notificação Criada",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cobranca_id\": 1,\n    \"canal\": \"email\",\n    \"email\": \"destino@example.com\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/notificacoes",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"notificacoes"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"success\",\n    \"status_code\": 201,\n    \"message\": \"Notificação criada com sucesso! O envio será processado em breve.\",\n    \"data\": {\n        \"id\": 1,\n        \"cobranca_id\": 1,\n        \"canal\": \"email\",\n        \"email\": \"destino@example.com\",\n        \"status\": \"pendente\",\n        \"created_at\": \"2024-12-24T12:00:00.000000Z\"\n    }\n}"
						},
						{
							"name": "Sucesso - Notificação SMS",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cobranca_id\": 2,\n    \"canal\": \"sms\",\n    \"telefone\": \"(11) 99999-9999\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/notificacoes",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"notificacoes"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"success\",\n    \"status_code\": 201,\n    \"message\": \"Notificação criada com sucesso! O envio será processado em breve.\",\n    \"data\": {\n        \"id\": 2,\n        \"cobranca_id\": 2,\n        \"canal\": \"sms\",\n        \"telefone\": \"(11) 99999-9999\",\n        \"status\": \"pendente\",\n        \"created_at\": \"2024-12-24T12:05:00.000000Z\"\n    }\n}"
						},
						{
							"name": "Erro - Validação (422) - Campos Faltando",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/notificacoes",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"notificacoes"
									]
								}
							},
							"status": "Unprocessable Entity",
							"code": 422,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"error\",\n    \"status_code\": 422,\n    \"message\": \"Erro de validação ao criar notificação.\",\n    \"errors\": {\n        \"cobranca_id\": [\"O campo cobrança é obrigatório.\"],\n        \"canal\": [\"O campo canal de notificação é obrigatório.\"]\n    }\n}"
						},
						{
							"name": "Erro - Validação (422) - Canal Inválido",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cobranca_id\": 1,\n    \"canal\": \"whatsapp\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/notificacoes",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"notificacoes"
									]
								}
							},
							"status": "Unprocessable Entity",
							"code": 422,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"error\",\n    \"status_code\": 422,\n    \"message\": \"Erro de validação ao criar notificação.\",\n    \"errors\": {\n        \"canal\": [\"O campo canal de notificação deve ser \\\"email\\\" ou \\\"sms\\\".\"]\n    }\n}"
						},
						{
							"name": "Erro - Cobrança Não Encontrada (404)",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cobranca_id\": 999,\n    \"canal\": \"email\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/notificacoes",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"notificacoes"
									]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"error\",\n    \"status_code\": 404,\n    \"message\": \"Cobrança não encontrada.\"\n}"
						},
						{
							"name": "Erro - Servidor (500)",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Accept",
										"value": "application/json"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"cobranca_id\": 1,\n    \"canal\": \"email\",\n    \"email\": \"destino@example.com\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/api/notificacoes",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"notificacoes"
									]
								}
							},
							"status": "Internal Server Error",
							"code": 500,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"error\",\n    \"status_code\": 500,\n    \"message\": \"Erro ao processar a solicitação. Tente novamente mais tarde.\"\n}"
						}
					]
				},
				{
					"name": "Enviar Notificação por SMS",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"cobranca_id\": 1,\n    \"canal\": \"sms\",\n    \"telefone\": \"(11) 99999-9999\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/notificacoes",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"notificacoes"
							]
						},
						"description": "Envia uma notificação de pagamento por SMS para uma cobrança específica.\n\n**Parâmetros:**\n- `cobranca_id` (obrigatório): ID da cobrança a ser notificada\n- `canal` (obrigatório): Deve ser \"sms\"\n- `telefone` (opcional): Telefone de destino. Se não fornecido, será usado o telefone do cliente associado à cobrança\n\n**Validações:**\n- A cobrança deve existir\n- O canal deve ser \"sms\"\n- Quando o canal for \"sms\": o parâmetro `telefone` é obrigatório OU o cliente associado à cobrança deve ter um telefone cadastrado\n- O telefone fornecido deve ser uma string válida (máximo 20 caracteres)\n\n**Resposta de Sucesso (201):**\n```json\n{\n    \"status\": \"success\",\n    \"status_code\": 201,\n    \"message\": \"Notificação criada com sucesso! O envio será processado em breve.\",\n    \"data\": {\n        \"id\": 2,\n        \"cobranca_id\": 1,\n        \"canal\": \"sms\",\n        \"telefone\": \"(11) 99999-9999\",\n        \"status\": \"pendente\",\n        \"created_at\": \"2024-12-24T12:05:00.000000Z\"\n    }\n}\n```"
					}
				}
			],
			"description": "Endpoints relacionados a notificações de pagamento"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000",
			"type": "string"
		}
	]
}

